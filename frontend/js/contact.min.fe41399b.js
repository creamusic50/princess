document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("contactForm"),t=document.getElementById("formMessage");e&&e.addEventListener("submit",async function(s){s.preventDefault();const n=e.querySelector('button[type="submit"]'),o=n.textContent;n.textContent="Sending...",n.disabled=!0,t.textContent="",t.className="form-message";const a={name:document.getElementById("name").value.trim(),email:document.getElementById("email").value.trim(),subject:document.getElementById("subject").value.trim(),message:document.getElementById("message").value.trim()};if(!(a.name&&a.email&&a.subject&&a.message))return t.className="form-message error",t.textContent="Please fill in all required fields.",n.textContent=o,void(n.disabled=!1);if(a.message.length<10)return t.className="form-message error",t.textContent="Message must be at least 10 characters long.",n.textContent=o,void(n.disabled=!1);try{const s="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:5000":"";console.log("Submitting to:",`${s}/api/contact`),console.log("Form data:",a);const n=await fetch(`${s}/api/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});console.log("Response status:",n.status);const o=await n.json();console.log("Response data:",o),n.ok&&o.success?(t.className="form-message success",t.textContent=o.message||"Thank you for your message! We will get back to you soon.",e.reset(),setTimeout(()=>{t.textContent="",t.className="form-message"},5e3)):(t.className="form-message error",o.errors&&o.errors.length>0?t.textContent=o.errors.map(e=>e.msg).join(", "):t.textContent=o.message||"There was an error sending your message. Please try again.")}catch(e){console.error("Contact form error:",e),t.className="form-message error",t.textContent="Unable to send message. Please check that the backend server is running and try again."}finally{n.textContent=o,n.disabled=!1}})});