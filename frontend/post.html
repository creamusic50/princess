<!DOCTYPE html>
<html lang="en">
<head>
    <script async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4861288278202695"
  crossorigin="anonymous"></script>

 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
 <meta name="google-site-verification" content="p7ObZPC6DOBVi-AUb8yGPQMlDFuLkMFZvLPv0vvfS8w" />
 <meta name="description" id="meta-description" content="">
 <meta name="keywords" id="meta-keywords" content="">
 <meta name="author" content="Smart Money Guide">
 <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
 <meta property="og:title" id="og-title" content="">
 <meta property="og:description" id="og-description" content="">
 <meta property="og:type" content="article">
 <meta property="og:image" id="og-image" content="">
 <meta property="og:site_name" content="Smart Money Guide">
 <meta name="twitter:card" content="summary_large_image">
 <meta name="twitter:title" id="twitter-title" content="">
 <meta name="twitter:description" id="twitter-description" content="">
 <meta name="google-adsense-account" content="ca-pub-4861288278202695">
 <meta name="color-scheme" content="light dark">
 <meta name="theme-color" content="#3498db">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <title id="page-title">Loading... - Smart Money Guide</title>
 
 <!-- DNS Prefetch -->
 <link rel="dns-prefetch" href="https://fonts.googleapis.com">
 <link rel="dns-prefetch" href="https://fonts.gstatic.com">
 <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
 
 <!-- Preconnect -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 
 <!-- Preload critical assets (used via onload) -->
 <link rel="preload" href="css/style.6205c462.css" as="style" onload="this.rel='stylesheet'">
 
 <!-- Inline critical CSS moved to css/posts.css for maintainability -->
 
<!-- Load fonts -->
 <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap">
 <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap">
 <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap"></noscript>
 
 <!-- Load main stylesheet (posts.css remains) -->
 <link rel="stylesheet" href="css/posts.css">
 <noscript><link rel="stylesheet" href="css/style.6205c462.css"></noscript>
 <!-- Force desktop-style navigation: hide hamburger and always show full menu -->
 <style>
 .hamburger, .mobile-overlay { display: none !important; }
 .nav-menu { position: static !important; right: auto !important; display: flex !important; flex-direction: row !important; align-items: center !important; gap: 25px !important; width: auto !important; height: auto !important; background: transparent !important; box-shadow: none !important; padding: 0 !important; transition: none !important; }
 .nav-menu li { width: auto !important; }
 .nav-menu li a { padding: 0 !important; }
 </style>

 <!-- Favicon as data URI -->
 <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=">
 
 <!-- Structured Data -->
 <script type="application/ld+json" id="article-schema">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "datePublished": "2025-12-26",
  "publisher": {
    "@type": "Organization",
    "name": "Smart Money Guide",
    "logo": {
      "@type": "ImageObject",
      "url": "https://tilana.online/images/logo.png"
    }
  }
}
</script>
</head>
<body>
 <header role="banner">
 <nav class="navbar" aria-label="Main navigation">
 <div class="container">
 <div class="nav-wrapper">
 <a href="index.html" class="logo" aria-label="Smart Money Guide home"> Smart Money Guide</a>
 <!-- Hamburger removed to force desktop nav -->
 <ul class="nav-menu" id="nav-menu">
 <li><a href="index.html">Home</a></li>
 <li><a href="index.html#categories">Categories</a></li>
 <li><a href="about.html">About</a></li>
 <li><a href="contact.html">Contact</a></li>
 </ul>
 <!-- mobile-overlay removed (desktop nav forced) -->
 </div>
 </div>
 </nav>
 </header>

 <main role="main">
 <article class="post-container">
 <div class="container">
 <div class="post-header">
 <span class="category-badge" id="post-category" role="note">Loading...</span>
 <h1 id="post-title">Loading article...</h1>
 <div class="post-meta" id="post-meta" role="doc-info">
 <span class="author">By <span id="post-author">...</span></span>
 <span class="date"><time id="post-date" datetime="">...</time></span>
 <span class="views">️ <span id="post-views">0</span> views</span>
 </div>
 </div>

<!-- Post main area: TOC + content -->
<div class="post-main">
    <!-- Table of contents will be generated here -->
    <nav id="post-toc" aria-label="Table of contents" class="post-toc" hidden>
        <button class="toc-toggle" aria-expanded="false" aria-controls="post-toc-list">Contents ▾</button>
    </nav>

    <div class="post-body" id="post-content">
 <div class="loading">
 <div class="spinner"></div>
 <p>Loading article content...</p>
    </div>
</div>
</div>

<!-- Ad unit: Smart Money Guide - In-page ad (post) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4861288278202695"
    crossorigin="anonymous"></script>
<!-- tilana -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-4861288278202695"
    data-ad-slot="6159268487"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
 
 <div class="post-footer">
 <div class="post-tags" id="post-tags"></div>
 <div class="post-actions">
 <button class="action-btn" id="back-btn" aria-label="Go back">← Back</button>
 <button class="action-btn" id="share-btn" aria-label="Share article">Share </button>
 </div>
 </div>
 </div>
 </article>

 <section class="related-posts" id="related-posts">
 <div class="container">
 <h2>Related Articles</h2>
 <div class="blog-grid" id="related-grid">
 <!-- Related posts loaded via JavaScript -->
 </div>
 </div>
 </section>
 </main>

 <footer class="site-footer" role="contentinfo">
 <div class="container">
 <div class="footer-top">
 <div class="footer-grid">
 <div class="footer-column">
 <h3 class="footer-title"> Smart Money Guide</h3>
 <p class="footer-desc">Your trusted resource for financial education, investing strategies, and money management tips.</p>
 <div class="social-links">
 <a href="#" class="social-link" aria-label="Facebook">Facebook</a>
 <a href="#" class="social-link" aria-label="Twitter">Twitter</a>
 <a href="#" class="social-link" aria-label="LinkedIn">LinkedIn</a>
 </div>
 </div>
 <div class="footer-column">
 <h4 class="footer-heading">Quick Links</h4>
 <ul class="footer-links">
 <li><a href="index.html">Home</a></li>
 <li><a href="about.html">About</a></li>
 <li><a href="contact.html">Contact</a></li>
 <li><a href="authors.html">Authors</a></li>
 </ul>
 </div>
 <div class="footer-column">
 <h4 class="footer-heading">Categories</h4>
 <ul class="footer-links">
 <li><a href="index.html#categories"> Saving Tips</a></li>
 <li><a href="index.html#categories"> Investing</a></li>
 <li><a href="index.html#categories"> Budgeting</a></li>
 <li><a href="index.html#categories">️ Retirement</a></li>
 </ul>
 </div>
 <div class="footer-column">
 <h4 class="footer-heading">Legal</h4>
 <ul class="footer-links">
 <li><a href="privacy.html">Privacy</a></li>
 <li><a href="terms.html">Terms</a></li>
 <li><a href="disclaimer.html">Disclaimer</a></li>
 <li><a href="dmca.html">DMCA</a></li>
 </ul>
 </div>
 </div>
 </div>
 <div class="footer-bottom">
 <p>&copy; 2025 Smart Money Guide. All rights reserved.</p>
 </div>
 </div>
 </footer>

 <!-- Load scripts with defer -->
 <script src="js/config.min.f841bc00.js" defer></script>
 <script>
        // Post page specific JavaScript (inline for faster execution)
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const slug = urlParams.get('slug');

            if (!slug) {
                showError('No article specified');
                return;
            }

            try {
                // Load post data
                const response = await fetch(`${window.CONFIG?.API_BASE_URL || '/api'}/posts/${slug}`);
                const data = await response.json();

                if (data.success && data.post) {
                    displayPost(data.post, slug);
                    loadRelatedPosts(data.post.category);
                } else {
                    showError('Article not found');
                }
            } catch (error) {
                console.error('Error loading post:', error);
                showError('Failed to load article');
            }
            // Attach Back button handler (CSP-safe)
            const backBtn = document.getElementById('back-btn');
            if (backBtn) backBtn.addEventListener('click', () => window.history.back());
        });
        
        function humanizeSlug(s) {
            if (!s) return '';
            try { s = decodeURIComponent(s); } catch (e) {}
            // remove trailing numeric IDs like -680405
            s = s.replace(/-\d+$/,'');
            return s.replace(/[-_]+/g,' ').replace(/\b\w/g, c => c.toUpperCase());
        }

        function displayPost(post, slug) {
            const titleText = (post && post.title && post.title.trim()) ? post.title : humanizeSlug(post?.slug || slug);
            document.getElementById('page-title').textContent = `${titleText} - Smart Money Guide`;
            document.getElementById('post-title').textContent = titleText;
            document.getElementById('post-category').textContent = post.category;
            document.getElementById('post-author').textContent = post.author_name || 'Smart Money Guide';
            document.getElementById('post-date').textContent = new Date(post.created_at).toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'});
            document.getElementById('post-date').setAttribute('datetime', post.created_at);
            document.getElementById('post-views').textContent = post.views || 0;
            document.getElementById('post-content').innerHTML = post.content;

            // Generate Table of Contents based on headings in the content
            generateTOC();
            
            // Set meta tags
            document.getElementById('meta-description').setAttribute('content', post.excerpt || post.title);
            document.getElementById('og-title').setAttribute('content', post.title);
            document.getElementById('og-description').setAttribute('content', post.excerpt || post.title);
            document.getElementById('twitter-title').setAttribute('content', post.title);
            document.getElementById('twitter-description').setAttribute('content', post.excerpt || post.title);

            // Populate Article JSON-LD for better indexing and AdSense signals
            try {
                const schemaEl = document.getElementById('article-schema');
                const pageUrl = window.location.href;
                const siteOrigin = window.location.origin || (window.location.protocol + '//' + window.location.host);

                const articleJson = {
                    "@context": "https://schema.org",
                    "@type": "Article",
                    "mainEntityOfPage": {"@type":"WebPage","@id": pageUrl},
                    "headline": titleText || post.title,
                    "description": post.excerpt || titleText || post.title,
                    "author": {"@type":"Person","name": post.author_name || 'Smart Money Guide'},
                    "datePublished": post.created_at,
                    "dateModified": post.updated_at || post.created_at,
                    "publisher": {
                        "@type": "Organization",
                        "name": "Smart Money Guide",
                        "logo": {
                            "@type": "ImageObject",
                            "url": siteOrigin + '/images/logo.png'
                        }
                    }
                };

                // Attach image if available (support multiple field names)
                (function(){
                    const cand = post.featured_image || post.image || post.image_url || post.imageUrl || null;
                    if (cand) {
                        articleJson.image = cand.startsWith('http') ? cand : siteOrigin + '/' + String(cand).replace(/^\//, '');
                    }
                })();

                if (schemaEl) {
                    schemaEl.textContent = JSON.stringify(articleJson);
                }

                // Ensure canonical URL is set
                let linkCanonical = document.querySelector("link[rel='canonical']");
                if (!linkCanonical) {
                    linkCanonical = document.createElement('link');
                    linkCanonical.rel = 'canonical';
                    document.head.appendChild(linkCanonical);
                }
                linkCanonical.href = pageUrl.replace(/\?.*$/, '');
            } catch (e) {
                console.warn('Failed to populate Article JSON-LD', e);
            }
            
            // Optimize images in content
            setTimeout(() => {
                const imgs = document.querySelectorAll('#post-content img');
                imgs.forEach((img, idx) => {
                    img.setAttribute('loading', idx === 0 ? 'eager' : 'lazy');
                    img.setAttribute('decoding', 'async');
                });
            }, 100);
            
            // Setup share button
            document.getElementById('share-btn').onclick = () => {
                if (navigator.share) {
                    navigator.share({title: post.title, url: window.location.href});
                } else {
                    navigator.clipboard.writeText(window.location.href);
                    alert('Link copied to clipboard!');
                }
            };
        }

        function generateTOC() {
            const toc = document.getElementById('post-toc');
            const content = document.getElementById('post-content');
            if (!content || !toc) return;

            // Find headings (h2 and h3) inside content
            const headings = content.querySelectorAll('h2, h3');
            if (!headings || headings.length === 0) {
                toc.hidden = true;
                return;
            }

            // Build unique IDs for each heading if missing
            const ids = new Set();
            headings.forEach((h, i) => {
                if (!h.id) {
                    // slugify text
                    let slug = (h.textContent || 'heading').toLowerCase().trim()
                        .replace(/[^a-z0-9\s-]/g, '')
                        .replace(/\s+/g, '-');
                    let unique = slug;
                    let idx = 1;
                    while (ids.has(unique)) {
                        unique = `${slug}-${idx++}`;
                    }
                    ids.add(unique);
                    h.id = unique;
                } else {
                    ids.add(h.id);
                }
            });

            // Build numbered TOC list (h2 top-level, h3 shown as subitems)
            const list = document.createElement('ul');
            list.className = 'toc-list';

            let h2Count = 0;
            let h3Count = 0;

            headings.forEach(h => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = `#${h.id}`;

                if (h.tagName.toLowerCase() === 'h2') {
                    h2Count++;
                    h3Count = 0;
                    a.innerHTML = `<strong>${h2Count}.</strong> ${h.textContent}`;
                    li.appendChild(a);
                } else {
                    // h3
                    h3Count++;
                    a.innerHTML = `<span class="toc-sub">${h2Count}.${h3Count}</span> ${h.textContent}`;
                    li.classList.add('toc-sub-item');
                    li.appendChild(a);
                }

                list.appendChild(li);
            });

            // Populate TOC nav
            toc.innerHTML = '';
                const title = document.createElement('h3');
                title.textContent = 'Contents';
                // Create container for list (used by toggle)
                const listContainer = document.createElement('div');
                listContainer.id = 'post-toc-list';
                listContainer.appendChild(list);

                toc.appendChild(title);
                toc.appendChild(listContainer);
                toc.hidden = false;

                // Mobile: collapse by default
                if (window.innerWidth < 980) {
                    toc.classList.add('collapsed');
                    const toggle = toc.querySelector('.toc-toggle');
                    if (toggle) toggle.setAttribute('aria-expanded', 'false');
                } else {
                    toc.classList.remove('collapsed');
                }

                // Setup toggle button behavior
                const toggleBtn = toc.querySelector('.toc-toggle');
                if (toggleBtn) {
                    toggleBtn.onclick = () => {
                        const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
                        toggleBtn.setAttribute('aria-expanded', expanded ? 'false' : 'true');
                        toc.classList.toggle('collapsed');
                    };
                }

                // Highlight active section on scroll using IntersectionObserver
                const anchors = Array.from(toc.querySelectorAll('.toc-list a'));
                const headingElements = Array.from(document.querySelectorAll('#post-content h2, #post-content h3'));

                // Remove previous observers if any
                if (window.__tocObserver) {
                    window.__tocObserver.disconnect();
                }

                const observerOptions = {root: null, rootMargin: '0px 0px -60% 0px', threshold: 0};
                window.__tocObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const id = entry.target.id;
                            anchors.forEach(a => a.classList.toggle('active', a.getAttribute('href') === `#${id}`));
                        }
                    });
                }, observerOptions);

                headingElements.forEach(h => {
                    if (h.id) window.__tocObserver.observe(h);
                });

                // Close TOC on mobile when a link is clicked
                // Also perform smooth scroll with offset so headings are visible below sticky header
                anchors.forEach(a => {
                    a.addEventListener('click', (e) => {
                        e.preventDefault();
                        const href = a.getAttribute('href');
                        const id = href && href.startsWith('#') ? href.slice(1) : null;
                        const target = id ? document.getElementById(id) : null;
                        const header = document.querySelector('header');
                        const headerOffset = header ? header.offsetHeight + 16 : 110; // extra gap
                        if (target) {
                            const top = target.getBoundingClientRect().top + window.pageYOffset - headerOffset;
                            window.scrollTo({ top, behavior: 'smooth' });
                            // update hash without jumping
                            try { history.replaceState(null, '', '#' + id); } catch (e) {}
                        }

                        if (window.innerWidth < 980) {
                            toc.classList.add('collapsed');
                            const t = toc.querySelector('.toc-toggle');
                            if (t) t.setAttribute('aria-expanded', 'false');
                        }
                    });
                });
        }
        
        async function loadRelatedPosts(category) {
            try {
                const response = await fetch(`${window.CONFIG?.API_BASE_URL || '/api'}/posts?category=${encodeURIComponent(category)}&limit=3`);
                const data = await response.json();
                
                if (data.success && data.posts?.length > 0) {
                    const grid = document.getElementById('related-grid');
                    grid.innerHTML = data.posts.map(post => `
                        <article class="blog-card">
                            <div class="blog-card-content">
                                <span class="category-badge">${post.category}</span>
                                <h3><a href="post.html?slug=${post.slug}">${post.title}</a></h3>
                                <p class="excerpt">${post.excerpt || ''}</p>
                                <a href="post.html?slug=${post.slug}" class="read-more">Read More →</a>
                            </div>
                        </article>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading related posts:', error);
            }
        }
        
        function showError(message) {
            const container = document.getElementById('post-content');
            container.innerHTML = '';
            const wrap = document.createElement('div');
            wrap.className = 'error';
            const p = document.createElement('p');
            p.textContent = '⚠️ ' + message;
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'btn-primary';
            btn.textContent = 'Go Home';
            btn.addEventListener('click', function() { window.location.href = 'index.html'; });
            wrap.appendChild(p);
            wrap.appendChild(btn);
            container.appendChild(wrap);
        }
    </script>
 
 <!-- Load AdSense after content -->
 <script>
        window.addEventListener('load', function() {
            setTimeout(function() {
                var adsScript = document.createElement('script');
                adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4861288278202695';
                adsScript.async = true;
                adsScript.crossOrigin = 'anonymous';
                document.head.appendChild(adsScript);
            }, 1000);
        });
    </script>
 
 <!-- Reading progress bar -->
 <script>
        window.addEventListener('load', function() {
            const bar = document.createElement('div');
            bar.style.cssText = 'position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,#667eea 0%,#764ba2 100%);width:0%;z-index:9999;transition:width 0.1s';
            document.body.appendChild(bar);
            
            window.addEventListener('scroll', function() {
                const h = document.documentElement.scrollHeight - window.innerHeight;
                const p = (window.pageYOffset / h) * 100;
                bar.style.width = Math.min(p, 100) + '%';
            });
        });
    </script>
    <!-- Analytics Tracking -->
    <script>
        (function(){
            const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:5000/api' : '/api';
            try {
                fetch(API_URL + '/analytics/track', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        page: window.location.pathname,
                        referrer: document.referrer || 'Direct'
                    })
                }).catch(e => console.log('Analytics error:', e));
            } catch(e) { }
        })();
    </script>

    <!-- Mobile menu removed; desktop nav enforced site-wide -->

    <!-- Service Worker registration with cache busting -->
    <script defer>
       if('serviceWorker' in navigator){
           window.addEventListener('load', function(){
               navigator.serviceWorker.getRegistrations().then(function(registrations) {
                   for(let registration of registrations) {
               }
           });
       }
    </script>
</body>
</html>